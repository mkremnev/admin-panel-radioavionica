<?phpdeclare(strict_types=1);namespace Test\Functional;use GuzzleHttp\Client;use function file_get_contents;use function json_decode;use function urlencode;use const JSON_THROW_ON_ERROR;class MailerClient{    private Client $client;    public function __construct()    {        $this->client = new Client([            'base_uri' => 'http://mailer:8025',        ]);    }    public function clear(): void    {        $this->client->delete('/api/v1/messages');    }    public function hasEmailSentTo(string $email): bool    {        $response = $this->client->get('/api/v2/search?kind=to&query=' . urlencode($email));        $json = json_decode((string)$response->getBody(), true, 512, JSON_THROW_ON_ERROR);        return $json['total'] > 0;    }}